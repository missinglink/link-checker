<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="http://coffeescript.org/extras/coffee-script.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script src="/client/lib.js"></script>
        
        <link rel="stylesheet" type="text/css" href="style.css" />
        
        <script type="text/coffeescript">
            
            $ ->
                socket = io.connect 'http://localhost', port : 3000
                
                $('body').addClass 'linkchecker'
                
                # Parse links and send them to the server
                $('a').each -> socket.emit 'link.add', href : this.href
                
                socket.on 'link.status', (link) ->
                
                    # Remove trailing slash
                    href = link.href.replace /\/+$/, ''
                    
                    # Update all links with that href on the page
                    $('a[href="'+href+'"]').each ->
                        $(this).before $('<span>')
                               .addClass('status')
                               .addClass('HTTP'+link.status)
                               .text link.status

        </script>
        
    </head>
    <body>
        <p><a href="http://google.com">http://google.com</a></p>
        <p><a href="http://www.google.com">http://www.google.com</a></p>
        <p><a href="http://www.amazon.com">http://www.amazon.com</a></p>
        <p><a href="http://www.yahoo.com">http://www.yahoo.com</a></p>
        <p><a href="http://www.facebook.com">http://www.facebook.com</a></p>
        <p><a href="http://www.twitter.com">http://www.twitter.com</a></p>
        <p><a href="http://www.fewf234r433434fvwefewff323r3.com">http://www.fewf234r433434fvwefewff323r3.com</a></p>
    </body>
</html>
